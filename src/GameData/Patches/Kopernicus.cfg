// Kopernicus augments other solar panel modules.

// Kopernicus does its patching in LAST[KOP_MULTI_START] so we need to run the
// patches here after that.
//
// We can still avoid FINAL here, though.
@PART:HAS[@MODULE[KopernicusSolarPanel],!MODULE[ModuleBackgroundKopernicusSolarPanel]]:LAST[ZZZ-BackgroundResourceProcessing]:NEEDS[Kopernicus]
{
    MODULE
    {
        name = ModuleBackgroundKopernicusSolarPanel
    }

    // We want the kopernicus module to take priority over the generic one.
    !MODULE[ModuleBackgroundSolarPanel],* {}
}
